# Ymir's Store API

**ESPAÃ‘OL / ENGLISH**

---

## ğŸŒ IntroducciÃ³n / Introduction

**ES:** Ymir's Store API es el backend de una tienda de comercio electrÃ³nico especializada en productos medievales y de fantasÃ­a. EstÃ¡ desplegada y funcionando en producciÃ³n en: **[ymir.up.railway.app](https://ymir.up.railway.app)**. Esta API demuestra el uso combinado de mÃºltiples tecnologÃ­as modernas del ecosistema JavaScript, manejo de lÃ³gica de negocio, estructuraciÃ³n profesional de proyectos y experiencia real en desarrollo full stack.

**EN:** Ymir's Store API is the backend of an e-commerce store focused on medieval and fantasy products. It is deployed and running in production at: **[ymir.up.railway.app](https://ymir.up.railway.app)**. This API showcases the combined use of modern JavaScript ecosystem technologies, business logic handling, professional project structuring, and real-world full stack development experience.

---

## ğŸš€ TecnologÃ­as Utilizadas / Technologies Used

- **Node.js + Express.js** â€“ Backend robusto y modular / Robust and modular backend
- **MongoDB + Mongoose** â€“ Base de datos NoSQL / NoSQL database
- **Passport.js** â€“ AutenticaciÃ³n local y con GitHub / Local and GitHub authentication
- **JWT** â€“ GestiÃ³n segura de sesiones / Secure session handling
- **Socket.io** â€“ ComunicaciÃ³n en tiempo real / Real-time communication
- **MercadoPago SDK** â€“ IntegraciÃ³n completa de pagos / Full payment integration
- **Nodemailer** â€“ EnvÃ­o de correos electrÃ³nicos (recuperaciÃ³n, compra, etc.) / Email services (recovery, purchases, etc.)
- **Handlebars** â€“ Plantillas de emails personalizadas / Custom email templates
- **Swagger** â€“ DocumentaciÃ³n de la API / API documentation
- **Winston** â€“ Registro de logs avanzados / Advanced logging system

---

## ğŸ” CaracterÃ­sticas Principales / Key Features

- AutenticaciÃ³n de usuarios (local y GitHub)
- Registro y login con validaciones personalizadas
- CRUD de productos con control de permisos (usuarios y admins)
- GestiÃ³n avanzada de carritos y Ã³rdenes de compra
- Pasarela de pagos integrada con MercadoPago (incluyendo webhooks y validaciones)
- GeneraciÃ³n de tickets y actualizaciÃ³n automÃ¡tica del stock
- Sistema de mensajerÃ­a en tiempo real con WebSockets
- EnvÃ­o de correos HTML estilizados ante distintas acciones del usuario
- Logging con diferentes niveles y archivos de salida
- DocumentaciÃ³n dinÃ¡mica y navegable con Swagger
- Arquitectura escalable basada en capas (routers, controllers, services, DAO)

---

## ğŸ“‚ Estructura Profesional del Proyecto / Professional Project Structure

```
src/
â”œâ”€â”€ app.js
â”œâ”€â”€ config/              # ConfiguraciÃ³n general / App config
â”œâ”€â”€ controllers/         # Controladores HTTP / HTTP controllers
â”œâ”€â”€ dao/                 # Capa de acceso a datos / Data Access Layer
â”œâ”€â”€ middlewares/         # Middlewares personalizados / Custom middlewares
â”œâ”€â”€ models/              # Modelos de Mongoose / Mongoose models
â”œâ”€â”€ routes/              # Rutas del servidor / API routes
â”œâ”€â”€ services/            # LÃ³gica de negocio / Business logic
â”œâ”€â”€ utils/               # Utilidades generales / General utilities
â”œâ”€â”€ views/               # Templates de correos electrÃ³nicos / Email templates
â”œâ”€â”€ logs/                # Archivos de logs / Log files
```

---

## ğŸ“„ Endpoints Destacados / Featured Endpoints

**ES:** A continuaciÃ³n, algunos de los endpoints clave que ilustran el uso de la API. Para ver toda la documentaciÃ³n tÃ©cnica, visitar `/api/docs`.

**EN:** Below are some key endpoints showcasing the API's functionality. For full technical documentation, visit `/api/docs`.

### Productos / Products
- `GET /api/products` â€” Lista todos los productos / Lists all products
- `GET /api/products/:pid` â€” Producto por ID / Product by ID
- `POST /api/products` â€” Crear nuevo producto (solo admins) / Create product (admins only)

### Carrito de Compras / Shopping Cart
- `POST /api/carts` â€” Crear nuevo carrito / Create new cart
- `PUT /api/carts/:cid` â€” Actualizar contenido del carrito / Update cart content
- `POST /api/carts/:cid/purchase` â€” Iniciar compra vÃ­a MercadoPago / Start purchase via MercadoPago

### Sesiones / Sessions
- `POST /api/sessions/login` â€” Iniciar sesiÃ³n / Login
- `POST /api/sessions/register` â€” Registro de usuario / Register
- `GET /api/sessions/github` â€” Login con GitHub / GitHub login

---

## ğŸ›¡ï¸ Seguridad y Manejo de Sesiones / Security & Session Handling

**ES:** AutenticaciÃ³n basada en JWT para sesiones locales. GitHub OAuth integrado. ProtecciÃ³n de rutas por rol (usuario o administrador).

**EN:** JWT-based authentication for local sessions. GitHub OAuth integrated. Role-based route protection (user or admin).

---

## ğŸ“¨ Emails Automatizados / Automated Emails

**ES:** Correos enviados en eventos clave: registro, recuperaciÃ³n de contraseÃ±a, confirmaciÃ³n de compra, cambios de estado del pedido. Estilizados con Handlebars.

**EN:** Emails sent on key events: registration, password recovery, purchase confirmation, order status updates. Styled with Handlebars.

---

## ğŸ”§ Logging Avanzado / Advanced Logging

**ES:** Sistema de logging con Winston. Guarda logs de errores y logs combinados por niveles de severidad.

**EN:** Logging system using Winston. Saves error logs and combined logs by severity level.

---

## ğŸ“š DocumentaciÃ³n con Swagger / Swagger Documentation

**Disponible en:** `/api/docs`
**Available at:** `/api/docs`

---

## ğŸ“ˆ Para Empleadores y Clientes / For Employers and Clients

**ES:** Este proyecto demuestra:
- Capacidad de estructurar proyectos Node.js 
- Dominio de APIs RESTful con control de acceso y validaciÃ³n
- IntegraciÃ³n con servicios externos como MercadoPago y Nodemailer
- Habilidades de debugging y logging con buenas prÃ¡cticas
- Capacidad para desplegar en producciÃ³n y manejar entornos complejos

**EN:** This project demonstrates:
- Ability to structure Node.js projects
- Mastery of RESTful APIs with access control and validation
- Integration with external services such as MercadoPago and Nodemailer
- Debugging and logging skills following best practices
- Production deployment and management of complex environments

---

### ğŸŒŸ Creado con pasiÃ³n por Ezequiel Arraygada / Created with passion by Ezequiel Arraygada

> Un alma medieval en un mundo digital / A medieval soul in a digital world

ğŸŒ API en producciÃ³n: **https://ymir.up.railway.app**