<section class="nosotros">
  <div class="contenedor-nosotros">
    <div class="texto-nosotros">
      <h2>¬øC√≥mo compro en Ymir?</h2>
      <p>Comprar en Ymir es tan sencillo como emprender una aventura guiada por runas antiguas. Aqu√≠ te explicamos el paso a paso para elegir tu destino:</p>

      <p><strong>1. Explora el reino:</strong> Navega por las tierras de Ymir y descubre reliquias √∫nicas: espadas, grimorios, pociones y vestimentas encantadas.</p>

      <p><strong>2. Inicia sesi√≥n o crea tu pacto:</strong> Antes de sellar el destino, deber√°s registrarte o iniciar sesi√≥n como todo buen viajero en busca de reliquias.</p>

      <p><strong>3. Elige tu tesoro:</strong> Al hallar el objeto que hable a tu alma, agr√©galo al alforja (carrito). Puedes seguir explorando o marchar directo a tu misi√≥n.</p>

      <p><strong>4. Revisa tu alforja:</strong> Observa lo reunido, modifica cantidades o elimina √≠tems si as√≠ lo dicta tu coraz√≥n. Luego, contin√∫a al rito de compra.</p>

      <p><strong>5. Realiza el pago m√°gico:</strong> Nuestro sistema acepta hechizos modernos: tarjetas, MercadoPago y otros encantamientos digitales.</p>

      <p><strong>6. ¬°Tu aventura comienza!</strong> Recibir√°s un mensaje en forma de cuervo digital (email) con los detalles del env√≠o. Prepara tu morada, tus tesoros est√°n en camino.</p>

      <p class="frase-nosotros">üõ°Ô∏è En Ymir no solo compras objetos... sellas pactos con la historia.</p>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const cartId = '{{user.cart}}';
     async function updateCartCount() {
                try {
                    const response = await fetch(`/api/carts/${cartId}/count`, {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                    });
                    if (response.ok) {
                        const cart = await response.json();
                        const cartCount = cart.cart.products.reduce((total, product) => total + product.quantity, 0);
                        const cartCountGreaterThanZero = cartCount > 0;
                        document.getElementById('cart-count').innerText = cartCount;
                        document.getElementById('cart-count').style.display = cartCountGreaterThanZero ? 'inline-block' : 'none';
                    }
                } catch (error) {
                    console.error('Error al obtener el conteo del carrito', error);
                }
            }

            if (cartId != '') {
                document.getElementById('goToCartButton').addEventListener('click', () => {
                    const cartId = '{{user.cart}}';
                    window.location.href = `/api/carts/${cartId}`;
                });

                updateCartCount();
            }
  });
</script>

<style>
.nosotros {
  position: relative;
  color: #8f6053;
  font-family: 'Cinzel', serif;
  background-image: url('/assets/faq.jpg');
  background-size: cover; 
  padding: 4rem 2rem;
  border-top: 5px solid #8B5B29;
  opacity: 0.8;
  overflow: hidden;
  z-index: 1;
}

.nosotros::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url('/assets/nosotros.jpg'); /* Cambi√° esta ruta si necesit√°s otra imagen de fondo */
  background-size: cover;
  background-position: center;
  opacity: 0.6;
  z-index: -1;
}

.contenedor-nosotros {
  max-width: 900px;
  margin: 0 auto;
  background-color: #f8f4ebd0;
  padding: 2rem;
  border-radius: 16px;
  border: 3px solid #C2B7A0;
  box-shadow: 0 0 15px rgba(0,0,0,0.1);
}

.texto-nosotros h2 {
  font-size: 2.5rem;
  text-align: center;
  border-bottom: 2px solid #0f0f0e;
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  color: #0e0d0c;
}

.texto-nosotros p {
  font-size: 1.1rem;
  margin-bottom: 1.2rem;
  line-height: 1.8;
  color: #2c1c12;
}

.texto-nosotros strong {
  color: #5B1F0F;
}

.frase-nosotros {
  font-style: italic;
  font-weight: bold;
  font-size: 1.3rem;
  margin-top: 2rem;
  text-align: center;
  color: #dfbb93;
}

@media (max-width: 768px) {
  .contenedor-nosotros {
    padding: 1.5rem;
  }

  .texto-nosotros h2 {
    font-size: 0.5rem;
  }

  .texto-nosotros p {
    font-size: 0.5rem;
  }
}
</style>
